<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Samy Y">
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Services - Aqsam</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">Aqsam</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../features/" class="nav-link">Features</a>
                            </li>
                            <li class="nav-item">
                                <a href="../usage/" class="nav-link">Usage</a>
                            </li>
                            <li class="nav-item">
                                <a href="../models/" class="nav-link">Models</a>
                            </li>
                            <li class="nav-item">
                                <a href="../database_schema/" class="nav-link">Database</a>
                            </li>
                            <li class="nav-item">
                                <a href="./" class="nav-link active" aria-current="page">Services</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../database_schema/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/Samy-Y/Aqsam/edit/master/docs/service_functions.md" class="nav-link"><i class="fa-brands fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#service-functions" class="nav-link">Service Functions</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#user-services" class="nav-link">User Services</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#student-services" class="nav-link">Student Services</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#teacher-services" class="nav-link">Teacher Services</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#writer-services" class="nav-link">Writer Services</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#article-services" class="nav-link">Article Services</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#class-services" class="nav-link">Class Services</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#subject-services" class="nav-link">Subject Services</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#grade-services" class="nav-link">Grade Services</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#common-patterns-and-best-practices" class="nav-link">Common Patterns and Best Practices</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="service-functions">Service Functions</h1>
<p>This document provides comprehensive documentation for all service functions in the Aqsam application, including concrete examples and important notes for developers. Use to the table of contents located on the left side for quick navigation.</p>
<h2 id="user-services">User Services</h2>
<p>User services handle core user management functionality, including account creation, verification, and authentication.</p>
<h3 id="get_user_by_iduser_id-int-optionaluser"><code>get_user_by_id(user_id: int) -&gt; Optional[User]</code></h3>
<p>Retrieves a user by their ID.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">user = get_user_by_id(1)
if user:
    print(f&quot;Found user: {user.username}&quot;)
else:
    print(&quot;User not found&quot;)
</code></pre>
<h3 id="get_student_by_idstudent_id-int-optionalstudent"><code>get_student_by_id(student_id: int) -&gt; Optional[Student]</code></h3>
<p>Retrieves a student by their ID.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">student = get_student_by_id(1)
if student:
    print(f&quot;Found student: {student.user.username}&quot;)
else:
    print(&quot;Student not found&quot;)
</code></pre>
<h3 id="get_teacher_by_idteacher_id-int-optionalteacher"><code>get_teacher_by_id(teacher_id: int) -&gt; Optional[Teacher]</code></h3>
<p>Retrieves a teacher by their ID.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">teacher = get_teacher_by_id(1)
if teacher:
    print(f&quot;Found teacher: {teacher.user.username}&quot;)
else:
    print(&quot;Teacher not found&quot;)
</code></pre>
<h3 id="get_writer_by_idwriter_id-int-optionalwriter"><code>get_writer_by_id(writer_id: int) -&gt; Optional[Writer]</code></h3>
<p>Retrieves a writer by their ID.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">writer = get_writer_by_id(1)
if writer:
    print(f&quot;Found writer: {writer.user.username}&quot;)
else:
    print(&quot;Writer not found&quot;)
</code></pre>
<h3 id="get_user_by_emailemail-str-optionaluser"><code>get_user_by_email(email: str) -&gt; Optional[User]</code></h3>
<p>Retrieves a user by their email address.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">user = get_user_by_email(&quot;john.doe@example.com&quot;)
if user:
    print(f&quot;Found user: {user.username}&quot;)
else:
    print(&quot;User not found&quot;)
</code></pre>
<h3 id="get_user_by_usernameusername-str-optionaluser"><code>get_user_by_username(username: str) -&gt; Optional[User]</code></h3>
<p>Retrieves a user by their username.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">user = get_user_by_username(&quot;johndoe&quot;)
if user:
    print(f&quot;Found user: {user.id}&quot;)
else:
    print(&quot;User not found&quot;)
</code></pre>
<h3 id="get_users_by_rolerole-str-listuser"><code>get_users_by_role(role: str) -&gt; List[User]</code></h3>
<p>Retrieves all users with a specific role.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">teachers = get_users_by_role(&quot;teacher&quot;)
print(f&quot;Found {len(teachers)} teachers&quot;)
</code></pre>
<h3 id="delete_useruser-user-bool"><code>delete_user(user: User) -&gt; bool</code></h3>
<p>Soft deletes a user by setting their <code>activated</code> flag to <code>False</code>.</p>
<p><strong>⚠️ Warning:</strong> This is a soft delete that deactivates the user but keeps their record in the database.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">user = get_user_by_id(1)
if delete_user(user):
    print(&quot;User deactivated successfully&quot;)
else:
    print(&quot;Failed to deactivate user&quot;)
</code></pre>
<h3 id="generate_email_verification_tokenuser-user-expiry_hours-int-24-str"><code>generate_email_verification_token(user: User, expiry_hours: int = 24) -&gt; str</code></h3>
<p>Generates a token for email verification.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">user = get_user_by_id(1)
token = generate_email_verification_token(user)
print(f&quot;Verification token: {token}&quot;)
# Send this token in an email to the user
</code></pre>
<h3 id="verify_emailtoken-str-optionaluser"><code>verify_email(token: str) -&gt; Optional[User]</code></h3>
<p>Verifies a user's email using a verification token.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">user = verify_email(&quot;verification_token_from_email&quot;)
if user:
    print(&quot;Email verified successfully&quot;)
else:
    print(&quot;Invalid or expired verification token&quot;)
</code></pre>
<h3 id="generate_password_reset_tokenuser-user-expiry_hours-int-1-str"><code>generate_password_reset_token(user: User, expiry_hours: int = 1) -&gt; str</code></h3>
<p>Generates a token for password reset.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">user = get_user_by_email(&quot;user@example.com&quot;)
token = generate_password_reset_token(user)
print(f&quot;Password reset token: {token}&quot;)
# Send this token to user's email
</code></pre>
<h3 id="reset_passwordtoken-str-new_password-str-optionaluser"><code>reset_password(token: str, new_password: str) -&gt; Optional[User]</code></h3>
<p>Resets a user's password using a reset token.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">user = reset_password(&quot;reset_token_from_email&quot;, &quot;new_secure_password&quot;)
if user:
    print(&quot;Password reset successfully&quot;)
else:
    print(&quot;Invalid or expired reset token&quot;)
</code></pre>
<h3 id="activate_useruser-user-bool"><code>activate_user(user: User) -&gt; bool</code></h3>
<p>Activates a user account.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">user = get_user_by_id(1)
if activate_user(user):
    print(&quot;User activated successfully&quot;)
</code></pre>
<h3 id="deactivate_useruser-user-bool"><code>deactivate_user(user: User) -&gt; bool</code></h3>
<p>Deactivates a user account.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">user = get_user_by_id(1)
if deactivate_user(user):
    print(&quot;User deactivated successfully&quot;)
</code></pre>
<h3 id="is_account_activeuser-user-bool"><code>is_account_active(user: User) -&gt; bool</code></h3>
<p>Checks if a user account is active.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">user = get_user_by_id(1)
if is_account_active(user):
    print(&quot;User account is active&quot;)
else:
    print(&quot;User account is deactivated&quot;)
</code></pre>
<h3 id="create_userusername-str-password-str-role-str-email-optionalstr-none-first_name-optionalstr-none-last_name-optionalstr-none-birth_date-optionalstr-none-phone_number-optionalstr-none-user"><code>create_user(username: str, password: str, role: str, email: Optional[str] = None, first_name: Optional[str] = None, last_name: Optional[str] = None, birth_date: Optional[str] = None, phone_number: Optional[str] = None) -&gt; User</code></h3>
<p>Creates a new user.</p>
<p><strong>⚠️ Note:</strong> The <code>birth_date</code> parameter should be provided as a string in 'YYYY-MM-DD' format, which will be converted to a date object internally.</p>
<p><strong>⚠️ Note:</strong> The <code>profile_picture_filename</code> parameter present in the User Model can only be changed after the creation of the user. By default, the profile picture filename is set to <code>NULL</code> and replaced by a placeholder on the frontend.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">user = create_user(
    username=&quot;johndoe&quot;,
    password=&quot;secure_password&quot;,
    role=&quot;student&quot;,
    email=&quot;john.doe@example.com&quot;,
    first_name=&quot;John&quot;,
    last_name=&quot;Doe&quot;,
    birth_date=&quot;1995-05-15&quot;,
    phone_number=&quot;+1234567890&quot;
)
print(f&quot;Created new user with ID: {user.id}&quot;)
</code></pre>
<h3 id="set_user_pfpuser_id-int-pfp_filename-str-bool"><code>set_user_pfp(user_id: int, pfp_filename: str) -&gt; bool</code></h3>
<p>Sets the user's profile picture to the indicated filename stored in assets/profile_pictures.</p>
<h2 id="student-services">Student Services</h2>
<p>Student services manage student-specific operations.</p>
<h3 id="create_studentusername-str-password-str-role-str-email-str-first_name-str-last_name-str-birth_date-str-phone_number-str-class_id-optionalint-none-student"><code>create_student(username: str, password: str, role: str, email: str, first_name: str, last_name: str, birth_date: str, phone_number: str, class_id: Optional[int] = None) -&gt; Student</code></h3>
<p>Creates a new student.</p>
<p><strong>⚠️ Warning:</strong> Despite the <code>role</code> parameter, this function always sets the role to "student" in the <code>create_user</code> call.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">student = create_student(
    username=&quot;student1&quot;,
    password=&quot;secure_password&quot;,
    role=&quot;student&quot;,  # This parameter is ignored and always set to &quot;student&quot;
    email=&quot;student@example.com&quot;,
    first_name=&quot;Jane&quot;,
    last_name=&quot;Smith&quot;,
    birth_date=&quot;2005-10-15&quot;,  # Format: YYYY-MM-DD
    phone_number=&quot;+1234567890&quot;,
    class_id=3  # Optional class ID
)
print(f&quot;Created student with ID: {student.id}&quot;)
</code></pre>
<h3 id="update_studentstudent_id-int-username-optionalstr-none-password-optionalstr-none-email-optionalstr-none-first_name-optionalstr-none-last_name-optionalstr-none-birth_date-optionalstr-none-phone_number-optionalstr-none-class_id-optionalint-none-student"><code>update_student(student_id: int, username: Optional[str] = None, password: Optional[str] = None, email: Optional[str] = None, first_name: Optional[str] = None, last_name: Optional[str] = None, birth_date: Optional[str] = None, phone_number: Optional[str] = None, class_id: Optional[int] = None) -&gt; Student</code></h3>
<p>Updates a student's information.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">updated_student = update_student(
    student_id=1,
    email=&quot;new.email@example.com&quot;,
    phone_number=&quot;+9876543210&quot;,
    class_id=4
)
if updated_student:
    print(&quot;Student updated successfully&quot;)
else:
    print(&quot;Student not found&quot;)
</code></pre>
<h3 id="get_all_student_by_class_idclass_id-int-liststudent"><code>get_all_student_by_class_id(class_id: int) -&gt; List[Student]</code></h3>
<p>Retrieves all students in a specific class.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">students = get_all_student_by_class_id(3)
print(f&quot;Found {len(students)} students in the class&quot;)
for student in students:
    print(f&quot;- {student.user.first_name} {student.user.last_name}&quot;)
</code></pre>
<h2 id="teacher-services">Teacher Services</h2>
<p>Teacher services manage teacher-specific operations.</p>
<h3 id="create_teacherusername-str-password-str-email-str-first_name-str-last_name-str-birth_date-str-phone_number-str-subjects-list-none-classes-list-none-teacher"><code>create_teacher(username: str, password: str, email: str, first_name: str, last_name: str, birth_date: str, phone_number: str, subjects: List = None, classes: List = None) -&gt; Teacher</code></h3>
<p>Creates a new teacher.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python"># First, get subjects and classes if you want to associate them
math_subject = get_subject_by_name(&quot;Mathematics&quot;)
physics_subject = get_subject_by_name(&quot;Physics&quot;)
class_9a = get_class_by_name(&quot;9A&quot;)

teacher = create_teacher(
    username=&quot;mssmith&quot;,
    password=&quot;secure_password&quot;,
    email=&quot;teacher@example.com&quot;,
    first_name=&quot;Mary&quot;,
    last_name=&quot;Smith&quot;,
    birth_date=&quot;1980-05-12&quot;,  # Format: YYYY-MM-DD
    phone_number=&quot;+1234567890&quot;,
    subjects=[math_subject, physics_subject],  # Optional
    classes=[class_9a]  # Optional
)
print(f&quot;Created teacher with ID: {teacher.id}&quot;)
</code></pre>
<h3 id="update_teacherteacher_id-int-kwargs-optionalteacher"><code>update_teacher(teacher_id: int, **kwargs) -&gt; Optional[Teacher]</code></h3>
<p>Updates a teacher's information using keyword arguments.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">updated_teacher = update_teacher(
    teacher_id=1,
    username=&quot;msmith_new&quot;,
    email=&quot;mary.smith@newschool.edu&quot;,
    phone_number=&quot;+9876543210&quot;
)
if updated_teacher:
    print(&quot;Teacher updated successfully&quot;)
else:
    print(&quot;Teacher not found&quot;)
</code></pre>
<h3 id="add_subject_to_teacherteacher_id-int-subject-optionalteacher"><code>add_subject_to_teacher(teacher_id: int, subject) -&gt; Optional[Teacher]</code></h3>
<p>Adds a subject to a teacher's list of subjects.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">chemistry = get_subject_by_name(&quot;Chemistry&quot;)
teacher = add_subject_to_teacher(1, chemistry)
if teacher:
    print(f&quot;Added Chemistry to teacher's subjects. Now teaches {len(teacher.subjects)} subjects&quot;)
</code></pre>
<h3 id="remove_subject_from_teacherteacher_id-int-subject-optionalteacher"><code>remove_subject_from_teacher(teacher_id: int, subject) -&gt; Optional[Teacher]</code></h3>
<p>Removes a subject from a teacher's list of subjects.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">physics = get_subject_by_name(&quot;Physics&quot;)
teacher = remove_subject_from_teacher(1, physics)
if teacher:
    print(f&quot;Removed Physics from teacher's subjects&quot;)
</code></pre>
<h3 id="add_class_to_teacherteacher_id-int-class_obj-optionalteacher"><code>add_class_to_teacher(teacher_id: int, class_obj) -&gt; Optional[Teacher]</code></h3>
<p>Adds a class to a teacher's list of classes.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">class_10b = get_class_by_name(&quot;10B&quot;)
teacher = add_class_to_teacher(1, class_10b)
if teacher:
    print(f&quot;Added class 10B to teacher. Now teaches {len(teacher.classes)} classes&quot;)
</code></pre>
<h3 id="remove_class_from_teacherteacher_id-int-class_obj-optionalteacher"><code>remove_class_from_teacher(teacher_id: int, class_obj) -&gt; Optional[Teacher]</code></h3>
<p>Removes a class from a teacher's list of classes.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">class_9a = get_class_by_name(&quot;9A&quot;)
teacher = remove_class_from_teacher(1, class_9a)
if teacher:
    print(f&quot;Removed class 9A from teacher&quot;)
</code></pre>
<h3 id="get_teachers_by_subjectsubject-listteacher"><code>get_teachers_by_subject(subject) -&gt; List[Teacher]</code></h3>
<p>Retrieves all teachers who teach a specific subject.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">math = get_subject_by_name(&quot;Mathematics&quot;)
teachers = get_teachers_by_subject(math)
print(f&quot;Found {len(teachers)} teachers who teach Mathematics&quot;)
</code></pre>
<h2 id="writer-services">Writer Services</h2>
<p>Writer services manage writer-specific operations.</p>
<h3 id="create_writerusername-optionalstr-none-password-optionalstr-none-email-optionalstr-none-first_name-optionalstr-none-last_name-optionalstr-none-birth_date-optionalstr-none-phone_number-optionalstr-none-writer"><code>create_writer(username: Optional[str] = None, password: Optional[str] = None, email: Optional[str] = None, first_name: Optional[str] = None, last_name: Optional[str] = None, birth_date: Optional[str] = None, phone_number: Optional[str] = None) -&gt; Writer</code></h3>
<p>Creates a new writer.</p>
<p><strong>⚠️ Warning:</strong> All parameters are marked as optional, but some may actually be required by the underlying <code>create_user</code> function.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">writer = create_writer(
    username=&quot;journalist1&quot;,
    password=&quot;secure_password&quot;,
    email=&quot;writer@magazine.com&quot;,
    first_name=&quot;James&quot;,
    last_name=&quot;Johnson&quot;,
    birth_date=&quot;1988-07-23&quot;,  # Format: YYYY-MM-DD
    phone_number=&quot;+1234567890&quot;
)
print(f&quot;Created writer with ID: {writer.id}&quot;)
</code></pre>
<h3 id="update_writerwriter_id-int-username-optionalstr-none-password-optionalstr-none-email-optionalstr-none-first_name-optionalstr-none-last_name-optionalstr-none-birth_date-optionalstr-none-phone_number-optionalstr-none-writer"><code>update_writer(writer_id: int, username: Optional[str] = None, password: Optional[str] = None, email: Optional[str] = None, first_name: Optional[str] = None, last_name: Optional[str] = None, birth_date: Optional[str] = None, phone_number: Optional[str] = None) -&gt; Writer</code></h3>
<p>Updates a writer's information.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">updated_writer = update_writer(
    writer_id=1,
    username=&quot;jjohnson_senior&quot;,
    email=&quot;james.johnson@magazine.com&quot;,
    phone_number=&quot;+9876543210&quot;
)
if updated_writer:
    print(&quot;Writer updated successfully&quot;)
else:
    print(&quot;Writer not found&quot;)
</code></pre>
<h3 id="get_all_authored_articleswriter_id-int-listarticle"><code>get_all_authored_articles(writer_id: int) -&gt; List[Article]</code></h3>
<p>Retrieves all articles authored by a specific writer.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">articles = get_all_authored_articles(1)
print(f&quot;Writer has authored {len(articles)} articles&quot;)
for article in articles:
    print(f&quot;- {article.title} ({'Published' if article.is_published else 'Draft'})&quot;)
</code></pre>
<h2 id="article-services">Article Services</h2>
<p>Article services manage operations related to articles.</p>
<h3 id="create_articletitle-str-content_md-str-author_id-int-is_published-optionalbool-false-article"><code>create_article(title: str, content_md: str, author_id: int, is_published: Optional[bool] = False) -&gt; Article</code></h3>
<p>Creates a new article.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">article = create_article(
    title=&quot;Understanding Machine Learning&quot;,
    content_md=&quot;# Introduction\nMachine learning is a fascinating field...&quot;,
    author_id=1,
    is_published=False  # Default is draft (not published)
)
print(f&quot;Created article with ID: {article.id}&quot;)
</code></pre>
<h3 id="update_articlearticle_id-int-title-optionalstr-none-author_id-optionalint-none-content_md-optionalstr-none-is_published-optionalbool-none-article"><code>update_article(article_id: int, title: Optional[str] = None, author_id: Optional[int] = None, content_md: Optional[str] = None, is_published: Optional[bool] = None) -&gt; Article</code></h3>
<p>Updates an article's information.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">updated_article = update_article(
    article_id=1,
    title=&quot;Advanced Machine Learning Concepts&quot;,
    content_md=&quot;# Updated Introduction\nMachine learning has evolved...&quot;,
    is_published=True  # Publish the article
)
if updated_article:
    print(f&quot;Article updated and published on {updated_article.last_edited}&quot;)
else:
    print(&quot;Article not found&quot;)
</code></pre>
<h3 id="delete_articlearticle_id-int-bool"><code>delete_article(article_id: int) -&gt; bool</code></h3>
<p>Deletes an article.</p>
<p><strong>⚠️ Warning:</strong> This is a hard delete that completely removes the article from the database.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">if delete_article(1):
    print(&quot;Article deleted successfully&quot;)
else:
    print(&quot;Article not found or could not be deleted&quot;)
</code></pre>
<h2 id="class-services">Class Services</h2>
<p>Class services manage operations related to school classes.</p>
<h3 id="create_classname-str-level-str-optionalclass"><code>create_class(name: str, level: str) -&gt; Optional[Class]</code></h3>
<p>Creates a new class.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">class_obj = create_class(
    name=&quot;9A&quot;,
    level=&quot;Grade 9&quot;
)
print(f&quot;Created class with ID: {class_obj.id}&quot;)
</code></pre>
<h3 id="update_classclass_id-int-name-optionalstr-none-level-optionalstr-none-optionalclass"><code>update_class(class_id: int, name: Optional[str] = None, level: Optional[str] = None) -&gt; Optional[Class]</code></h3>
<p>Updates a class's information.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">updated_class = update_class(
    class_id=1,
    name=&quot;9B&quot;,
    level=&quot;Grade 9 Advanced&quot;
)
if updated_class:
    print(&quot;Class updated successfully&quot;)
else:
    print(&quot;Class not found&quot;)
</code></pre>
<h3 id="delete_classclass_id-int-bool"><code>delete_class(class_id: int) -&gt; bool</code></h3>
<p>Deletes a class.</p>
<p><strong>⚠️ Warning:</strong> This is a hard delete that completely removes the class from the database. Consider the impact on related students and teachers before deletion.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">if delete_class(1):
    print(&quot;Class deleted successfully&quot;)
else:
    print(&quot;Class not found or could not be deleted&quot;)
</code></pre>
<h3 id="get_class_by_idclass_id-int-optionalclass"><code>get_class_by_id(class_id: int) -&gt; Optional[Class]</code></h3>
<p>Retrieves a class by its ID.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">class_obj = get_class_by_id(1)
if class_obj:
    print(f&quot;Found class: {class_obj.name}, Level: {class_obj.level}&quot;)
else:
    print(&quot;Class not found&quot;)
</code></pre>
<h3 id="get_class_by_namename-str-optionalclass"><code>get_class_by_name(name: str) -&gt; Optional[Class]</code></h3>
<p>Retrieves a class by its name.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">class_obj = get_class_by_name(&quot;9A&quot;)
if class_obj:
    print(f&quot;Found class ID: {class_obj.id}, Level: {class_obj.level}&quot;)
else:
    print(&quot;Class not found&quot;)
</code></pre>
<h3 id="get_classes_by_levellevel-str-listclass"><code>get_classes_by_level(level: str) -&gt; List[Class]</code></h3>
<p>Retrieves all classes at a specific level.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">classes = get_classes_by_level(&quot;Grade 9&quot;)
print(f&quot;Found {len(classes)} classes at Grade 9 level&quot;)
for class_obj in classes:
    print(f&quot;- {class_obj.name}&quot;)
</code></pre>
<h3 id="get_all_classes-listclass"><code>get_all_classes() -&gt; List[Class]</code></h3>
<p>Retrieves all classes.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">classes = get_all_classes()
print(f&quot;Total classes: {len(classes)}&quot;)
</code></pre>
<h3 id="add_teacher_to_classclass_id-int-teacher_id-int-optionalclass"><code>add_teacher_to_class(class_id: int, teacher_id: int) -&gt; Optional[Class]</code></h3>
<p>Adds a teacher to a class.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">class_obj = add_teacher_to_class(1, 2)
if class_obj:
    print(f&quot;Teacher assigned to class {class_obj.name}&quot;)
else:
    print(&quot;Class or teacher not found&quot;)
</code></pre>
<h3 id="remove_teacher_from_classclass_id-int-teacher_id-int-optionalclass"><code>remove_teacher_from_class(class_id: int, teacher_id: int) -&gt; Optional[Class]</code></h3>
<p>Removes a teacher from a class.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">class_obj = remove_teacher_from_class(1, 2)
if class_obj:
    print(f&quot;Teacher removed from class {class_obj.name}&quot;)
else:
    print(&quot;Class or teacher not found, or teacher not assigned to class&quot;)
</code></pre>
<h3 id="get_classes_by_teacherteacher_id-int-listclass"><code>get_classes_by_teacher(teacher_id: int) -&gt; List[Class]</code></h3>
<p>Retrieves all classes taught by a specific teacher.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">classes = get_classes_by_teacher(1)
print(f&quot;Teacher teaches {len(classes)} classes&quot;)
for class_obj in classes:
    print(f&quot;- {class_obj.name}&quot;)
</code></pre>
<h3 id="get_student_count_in_classclass_id-int-int"><code>get_student_count_in_class(class_id: int) -&gt; int</code></h3>
<p>Gets the number of students in a class.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">count = get_student_count_in_class(1)
print(f&quot;Class has {count} students enrolled&quot;)
</code></pre>
<h2 id="subject-services">Subject Services</h2>
<p>Subject services manage operations related to academic subjects.</p>
<h3 id="create_subjectname-str-optionalsubject"><code>create_subject(name: str) -&gt; Optional[Subject]</code></h3>
<p>Creates a new subject.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">subject = create_subject(&quot;Physics&quot;)
if subject:
    print(f&quot;Created subject with ID: {subject.id}&quot;)
else:
    print(&quot;Failed to create subject&quot;)
</code></pre>
<h3 id="update_subjectsubject_id-int-name-optionalstr-none-optionalsubject"><code>update_subject(subject_id: int, name: Optional[str] = None) -&gt; Optional[Subject]</code></h3>
<p>Updates a subject's information.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">updated_subject = update_subject(
    subject_id=1,
    name=&quot;Advanced Physics&quot;
)
if updated_subject:
    print(&quot;Subject updated successfully&quot;)
else:
    print(&quot;Subject not found&quot;)
</code></pre>
<h3 id="delete_subjectsubject_id-int-bool"><code>delete_subject(subject_id: int) -&gt; bool</code></h3>
<p>Deletes a subject.</p>
<p><strong>⚠️ Warning:</strong> This is a hard delete that completely removes the subject from the database. Consider the impact on related grades and teachers before deletion.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">if delete_subject(1):
    print(&quot;Subject deleted successfully&quot;)
else:
    print(&quot;Subject not found or could not be deleted&quot;)
</code></pre>
<h3 id="get_subject_by_idsubject_id-int-optionalsubject"><code>get_subject_by_id(subject_id: int) -&gt; Optional[Subject]</code></h3>
<p>Retrieves a subject by its ID.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">subject = get_subject_by_id(1)
if subject:
    print(f&quot;Found subject: {subject.name}&quot;)
else:
    print(&quot;Subject not found&quot;)
</code></pre>
<h3 id="get_subject_by_namename-str-optionalsubject"><code>get_subject_by_name(name: str) -&gt; Optional[Subject]</code></h3>
<p>Retrieves a subject by its name.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">subject = get_subject_by_name(&quot;Mathematics&quot;)
if subject:
    print(f&quot;Found subject ID: {subject.id}&quot;)
else:
    print(&quot;Subject not found&quot;)
</code></pre>
<h2 id="grade-services">Grade Services</h2>
<p>Grade services manage operations related to student grades.</p>
<h3 id="create_gradestudent_id-int-subject_id-int-teacher_id-int-grade-float-comment-optionalstr-none-optionalgrade"><code>create_grade(student_id: int, subject_id: int, teacher_id: int, grade: float, comment: Optional[str] = None) -&gt; Optional[Grade]</code></h3>
<p>Creates a new grade for a student.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">new_grade = create_grade(
    student_id=1,
    subject_id=2,
    teacher_id=3,
    grade=85.5,
    comment=&quot;Excellent work on the project&quot;
)
if new_grade:
    print(f&quot;Created grade entry with ID: {new_grade.id}&quot;)
else:
    print(&quot;Failed to create grade entry&quot;)
</code></pre>
<h3 id="update_gradegrade_id-int-grade-optionalfloat-none-comment-optionalstr-none-optionalgrade"><code>update_grade(grade_id: int, grade: Optional[float] = None, comment: Optional[str] = None) -&gt; Optional[Grade]</code></h3>
<p>Updates a grade's information.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">updated_grade = update_grade(
    grade_id=1,
    grade=88.0,
    comment=&quot;After review, grade adjusted upward&quot;
)
if updated_grade:
    print(&quot;Grade updated successfully&quot;)
else:
    print(&quot;Grade entry not found&quot;)
</code></pre>
<h3 id="delete_gradegrade_id-int-bool"><code>delete_grade(grade_id: int) -&gt; bool</code></h3>
<p>Deletes a grade.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">if delete_grade(1):
    print(&quot;Grade deleted successfully&quot;)
else:
    print(&quot;Grade not found or could not be deleted&quot;)
</code></pre>
<h3 id="get_grade_by_idgrade_id-int-optionalgrade"><code>get_grade_by_id(grade_id: int) -&gt; Optional[Grade]</code></h3>
<p>Retrieves a grade by its ID.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">grade = get_grade_by_id(1)
if grade:
    print(f&quot;Grade: {grade.grade}, Subject: {grade.subject.name}&quot;)
else:
    print(&quot;Grade not found&quot;)
</code></pre>
<h3 id="get_grades_by_studentstudent_id-int-listgrade"><code>get_grades_by_student(student_id: int) -&gt; List[Grade]</code></h3>
<p>Retrieves all grades for a specific student.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">grades = get_grades_by_student(1)
print(f&quot;Student has {len(grades)} grade entries&quot;)
for grade in grades:
    print(f&quot;- {grade.subject.name}: {grade.grade}&quot;)
</code></pre>
<h3 id="get_grades_by_subjectsubject_id-int-listgrade"><code>get_grades_by_subject(subject_id: int) -&gt; List[Grade]</code></h3>
<p>Retrieves all grades for a specific subject.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">grades = get_grades_by_subject(1)
print(f&quot;Subject has {len(grades)} grade entries&quot;)
</code></pre>
<h3 id="get_grades_by_teacherteacher_id-int-listgrade"><code>get_grades_by_teacher(teacher_id: int) -&gt; List[Grade]</code></h3>
<p>Retrieves all grades assigned by a specific teacher.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">grades = get_grades_by_teacher(1)
print(f&quot;Teacher has assigned {len(grades)} grades&quot;)
</code></pre>
<h3 id="get_grades_by_student_and_subjectstudent_id-int-subject_id-int-listgrade"><code>get_grades_by_student_and_subject(student_id: int, subject_id: int) -&gt; List[Grade]</code></h3>
<p>Retrieves all grades for a student in a specific subject.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">grades = get_grades_by_student_and_subject(1, 2)
print(f&quot;Found {len(grades)} grade entries for the student in this subject&quot;)
for grade in grades:
    print(f&quot;- {grade.date.strftime('%Y-%m-%d')}: {grade.grade}&quot;)
</code></pre>
<h3 id="get_average_grade_by_studentstudent_id-int-optionalfloat"><code>get_average_grade_by_student(student_id: int) -&gt; Optional[float]</code></h3>
<p>Gets the average grade for a student across all subjects.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">avg = get_average_grade_by_student(1)
if avg:
    print(f&quot;Student's average grade: {avg:.2f}&quot;)
else:
    print(&quot;No grades found for the student&quot;)
</code></pre>
<h3 id="get_average_grade_by_subjectsubject_id-int-optionalfloat"><code>get_average_grade_by_subject(subject_id: int) -&gt; Optional[float]</code></h3>
<p>Gets the average grade for a subject across all students.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">avg = get_average_grade_by_subject(1)
if avg:
    print(f&quot;Subject's average grade: {avg:.2f}&quot;)
else:
    print(&quot;No grades found for the subject&quot;)
</code></pre>
<h3 id="get_student_subject_grades_summarystudent_id-int-dictstr-any"><code>get_student_subject_grades_summary(student_id: int) -&gt; Dict[str, Any]</code></h3>
<p>Gets a summary of grades for a student grouped by subject.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">summary = get_student_subject_grades_summary(1)
print(&quot;Grade summary by subject:&quot;)
for subject, data in summary.items():
    print(f&quot;- {subject}: Average = {data['average']:.2f}&quot;)
    print(f&quot;  All grades: {data['grades']}&quot;)
</code></pre>
<h3 id="get_recent_gradeslimit-int-10-listgrade"><code>get_recent_grades(limit: int = 10) -&gt; List[Grade]</code></h3>
<p>Gets the most recent grades.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-python">recent = get_recent_grades(5)  # Get 5 most recent grades
print(&quot;Recent grades:&quot;)
for grade in recent:
    print(f&quot;- {grade.student.user.first_name} {grade.student.user.last_name}: &quot; +
          f&quot;{grade.subject.name} - {grade.grade} &quot; +
          f&quot;({grade.date.strftime('%Y-%m-%d')})&quot;)
</code></pre>
<h2 id="common-patterns-and-best-practices">Common Patterns and Best Practices</h2>
<ol>
<li>
<p><strong>Error Handling</strong>: Most functions return <code>None</code> or <code>False</code> when an operation fails (e.g., item not found). Always check return values.</p>
</li>
<li>
<p><strong>Date Handling</strong>: Date strings should be in 'YYYY-MM-DD' format. The utility functions <code>format_date</code> and <code>format_date_to_obj</code> handle conversions.</p>
</li>
<li>
<p><strong>Transactions</strong>: All database operations use Flask-SQLAlchemy's session management. Modifications are committed automatically at the end of functions.</p>
</li>
<li>
<p><strong>Parameter Types</strong>: Be mindful of parameter types. Some functions expect objects (like a Teacher or Subject instance) while others expect IDs.</p>
</li>
<li>
<p><strong>Soft vs Hard Deletes</strong>: User deletion is implemented as a soft delete (deactivation), while other entities use hard deletes. Consider the implications before deleting data.</p>
</li>
</ol></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>MIT License</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
